<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pockit Ultra ‚Äî Complete Scale Sandbox</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body { height: 100%; overflow: hidden; background: #0a0d12; 
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif; }
    
    /* UI Panels */
    .ui-panel {
      position: fixed;
      background: rgba(15,20,28,.96);
      backdrop-filter: blur(16px) saturate(180%);
      border: 1px solid rgba(74,124,255,.3);
      border-radius: 12px;
      padding: 18px;
      color: #e8edf7;
      font-size: 13px;
      line-height: 1.6;
      box-shadow: 0 8px 32px rgba(0,0,0,.5), 0 0 0 1px rgba(255,255,255,.05) inset;
      z-index: 100;
      transition: all .3s;
      cursor: move; /* Show draggable cursor */
    }
    
    .ui-panel.minimized { opacity: 0; pointer-events: none; transform: scale(0.95); }
    .ui-panel.dragging { cursor: grabbing; z-index: 200; transition: none; }
    
    /* Non-overlapping initial positions */
    #visual-panel { 
      top: 20px; 
      left: 20px; 
      max-width: 320px; 
      max-height: calc(100vh - 40px); 
      overflow-y: auto;
      overflow-x: hidden;
    }
    #optimization-panel { top: 20px; left: 360px; max-width: 340px; }
    #controls-panel { bottom: 20px; left: 20px; max-width: 420px; }
    #stats-panel { top: 20px; right: 20px; min-width: 260px; }
    #viewport-panel { top: 480px; left: 20px; max-width: 320px; display: none; }
    #viewport-panel.active { display: block; }
    
    /* Custom scrollbar for visual panel */
    #visual-panel::-webkit-scrollbar {
      width: 8px;
    }
    
    #visual-panel::-webkit-scrollbar-track {
      background: rgba(15, 20, 28, 0.5);
      border-radius: 4px;
    }
    
    #visual-panel::-webkit-scrollbar-thumb {
      background: linear-gradient(135deg, #4a7cff, #6a9cff);
      border-radius: 4px;
      border: 1px solid rgba(106, 156, 255, 0.3);
    }
    
    #visual-panel::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(135deg, #6a9cff, #8ab4ff);
    }
    
    /* Firefox scrollbar */
    #visual-panel {
      scrollbar-width: thin;
      scrollbar-color: #4a7cff rgba(15, 20, 28, 0.5);
    }
    
    .panel-title {
      font-size: 15px;
      font-weight: 700;
      color: #6a9cff;
      margin-bottom: 14px;
      text-transform: uppercase;
      letter-spacing: 1px;
      border-bottom: 2px solid rgba(74,124,255,.2);
      padding-bottom: 8px;
    }
    
    .section-title {
      font-size: 12px;
      font-weight: 600;
      color: #8ab4ff;
      margin: 12px 0 8px 0;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .control-row {
      display: flex;
      align-items: center;
      gap: 12px;
      margin: 8px 0;
      padding: 6px 0;
    }
    
    .control-label {
      flex: 1;
      color: #b8c5d9;
      font-size: 12px;
    }
    
    .control-value {
      color: #6a9cff;
      font-weight: 600;
      min-width: 70px;
      text-align: right;
      font-size: 13px;
    }
    
    kbd {
      background: linear-gradient(180deg, #2a3440 0%, #1a2130 100%);
      border: 1px solid rgba(106,156,255,.4);
      border-bottom-width: 2px;
      border-radius: 4px;
      padding: 3px 7px;
      font-family: 'SF Mono', 'Monaco', 'Consolas', monospace;
      font-size: 11px;
      color: #8ab4ff;
      box-shadow: 0 2px 4px rgba(0,0,0,.3);
      display: inline-block;
      min-width: 22px;
      text-align: center;
    }
    
    /* Sliders */
    input[type="range"] {
      width: 100%;
      height: 6px;
      background: linear-gradient(90deg, rgba(74,124,255,.15), rgba(106,156,255,.25));
      border-radius: 3px;
      outline: none;
      -webkit-appearance: none;
      appearance: none;
      margin: 8px 0;
    }
    
    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: linear-gradient(135deg, #6a9cff, #4a7cff);
      cursor: grab;
      box-shadow: 0 2px 8px rgba(74,124,255,.6), 0 0 0 3px rgba(26,33,48,.8);
      transition: all .2s;
    }
    
    input[type="range"]::-webkit-slider-thumb:hover {
      box-shadow: 0 3px 12px rgba(74,124,255,.8), 0 0 0 4px rgba(26,33,48,.9);
      transform: scale(1.1);
    }
    
    input[type="range"]::-webkit-slider-thumb:active {
      cursor: grabbing;
      transform: scale(1.05);
    }
    
    input[type="range"]::-moz-range-thumb {
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: linear-gradient(135deg, #6a9cff, #4a7cff);
      cursor: grab;
      border: none;
      box-shadow: 0 2px 8px rgba(74,124,255,.6);
    }
    
    /* Buttons */
    button {
      background: linear-gradient(135deg, #4a7cff 0%, #6a9cff 100%);
      border: 1px solid rgba(255,255,255,.2);
      border-radius: 8px;
      padding: 10px 18px;
      color: white;
      font-weight: 600;
      cursor: pointer;
      transition: all .2s;
      font-size: 13px;
      box-shadow: 0 2px 8px rgba(74,124,255,.3);
      position: relative;
      overflow: hidden;
    }
    
    button::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: rgba(255,255,255,.2);
      transform: translate(-50%, -50%);
      transition: width .4s, height .4s;
    }
    
    button:hover::before {
      width: 300px;
      height: 300px;
    }
    
    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(74,124,255,.5);
    }
    
    button:active {
      transform: translateY(0);
    }
    
    button.secondary {
      background: linear-gradient(135deg, #2a3440 0%, #1a2130 100%);
      border-color: rgba(106,156,255,.3);
    }
    
    /* Toggle Switch */
    .toggle-switch {
      position: relative;
      width: 48px;
      height: 24px;
      background: rgba(255,255,255,.08);
      border: 1px solid rgba(255,255,255,.1);
      border-radius: 12px;
      cursor: pointer;
      transition: all .3s ease;
    }
    
    .toggle-switch.active {
      background: linear-gradient(135deg, #4a7cff, #6a9cff);
      border-color: rgba(106,156,255,.5);
      box-shadow: 0 2px 8px rgba(74,124,255,.4);
    }
    
    .toggle-switch::after {
      content: '';
      position: absolute;
      top: 2px;
      left: 2px;
      width: 18px;
      height: 18px;
      background: white;
      border-radius: 50%;
      transition: left .3s ease;
      box-shadow: 0 2px 4px rgba(0,0,0,.2);
    }
    
    .toggle-switch.active::after {
      left: 26px;
    }
    
    /* Viewport Frame */
    #viewport-frame {
      position: fixed;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      width: 50vw;
      height: 50vh;
      border: 3px dashed rgba(106,156,255,0.85);
      border-radius: 10px;
      pointer-events: none;
      opacity: 0;
      transition: opacity .25s ease;
      box-shadow: inset 0 0 0 1px rgba(0,0,0,0.3), 0 0 20px rgba(74,124,255,0.2);
    }
    
    #viewport-frame.active { 
      opacity: 1; 
      animation: pulseFrame 2s ease-in-out infinite;
    }
    
    @keyframes pulseFrame {
      0%, 100% { border-color: rgba(106,156,255,0.85); }
      50% { border-color: rgba(138,180,255,0.95); }
    }
    
    /* Reticle */
    #reticle {
      position: fixed;
      left: 50%;
      top: 50%;
      width: 20px;
      height: 20px;
      margin: -10px 0 0 -10px;
      pointer-events: none;
      opacity: 0.9;
    }
    
    #reticle::before, #reticle::after {
      content: '';
      position: absolute;
      background: linear-gradient(135deg, rgba(106,156,255,0.9), rgba(138,180,255,1));
      box-shadow: 0 0 4px rgba(74,124,255,0.5);
    }
    
    #reticle::before {
      left: 9px;
      top: 0;
      width: 2px;
      height: 20px;
    }
    
    #reticle::after {
      top: 9px;
      left: 0;
      width: 20px;
      height: 2px;
    }
    
    /* Tooltip */
    #tooltip {
      position: fixed;
      background: rgba(15,20,28,.98);
      color: #e8edf7;
      padding: 10px 14px;
      border-radius: 8px;
      font-size: 13px;
      pointer-events: none;
      z-index: 300;
      display: none;
      transform: translate(-50%, -120%);
      border: 1px solid rgba(106,156,255,.4);
      box-shadow: 0 4px 16px rgba(0,0,0,.6);
      white-space: nowrap;
    }
    
    /* Info Panel */
    #info-panel {
      position: fixed;
      bottom: 120px;
      right: 20px;
      min-width: 300px;
      max-width: 400px;
      background: rgba(15,20,28,.98);
      color: #e8edf7;
      padding: 16px;
      border-radius: 10px;
      font-size: 13px;
      z-index: 250;
      display: none;
      border: 1px solid rgba(106,156,255,.4);
      box-shadow: 0 6px 24px rgba(0,0,0,.7);
      line-height: 1.6;
    }
    
    #info-panel.active {
      display: block;
    }
    
    #info-panel .info-title {
      font-size: 16px;
      font-weight: 700;
      color: #6a9cff;
      margin-bottom: 12px;
      border-bottom: 2px solid rgba(106,156,255,.3);
      padding-bottom: 8px;
    }
    
    #info-panel .info-row {
      margin: 6px 0;
      display: flex;
      gap: 8px;
    }
    
    #info-panel .info-label {
      color: #8ab4ff;
      font-weight: 600;
      min-width: 100px;
    }
    
    #info-panel .info-value {
      color: #b8c5d9;
      flex: 1;
    }
    
    /* HUD Mini Viewport */
    #hud-mini {
      position: fixed;
      right: 20px;
      top: 320px;
      width: 260px;
      height: 146px;
      border: 2px solid rgba(74,124,255,.3);
      border-radius: 8px;
      overflow: hidden;
      background: rgba(10,13,18,.95);
      backdrop-filter: blur(8px);
      box-shadow: 0 4px 16px rgba(0,0,0,.5);
      display: none;
    }
    
    #hud-mini.active {
      display: block;
    }
    
    #hud-mini canvas {
      width: 100%;
      height: 100%;
    }
    
    /* 2D Map Overlay */
    #map-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.85);
      backdrop-filter: blur(8px);
      z-index: 500;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    #map-container {
      width: 90%;
      height: 90%;
      max-width: 1400px;
      max-height: 900px;
      background: rgba(15, 20, 28, 0.98);
      border: 2px solid rgba(74, 124, 255, 0.4);
      border-radius: 16px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.7);
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }
    
    #map-header {
      padding: 20px;
      background: linear-gradient(135deg, rgba(74, 124, 255, 0.15) 0%, rgba(106, 156, 255, 0.1) 100%);
      border-bottom: 2px solid rgba(74, 124, 255, 0.3);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    #map-header h2 {
      margin: 0;
      font-size: 24px;
      color: #6a9cff;
      font-weight: 700;
      letter-spacing: 1px;
    }
    
    #map-close {
      background: rgba(255, 80, 80, 0.2);
      border: 1px solid rgba(255, 80, 80, 0.4);
      color: #ff8080;
      font-size: 32px;
      width: 48px;
      height: 48px;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s;
      line-height: 0;
    }
    
    #map-close:hover {
      background: rgba(255, 80, 80, 0.3);
      transform: scale(1.05);
    }
    
    #map-canvas {
      flex: 1;
      background: #0a0d12;
      cursor: crosshair;
    }
    
    #map-info {
      padding: 16px 20px;
      background: rgba(10, 13, 18, 0.95);
      border-top: 1px solid rgba(74, 124, 255, 0.2);
      display: flex;
      justify-content: space-between;
      align-items: center;
      min-height: 60px;
    }
    
    #map-hover-info {
      color: #b8c5d9;
      font-size: 14px;
      flex: 1;
    }
    
    #map-stats {
      display: flex;
      gap: 20px;
      color: #8ab4ff;
      font-size: 13px;
      font-weight: 600;
    }
    
    /* Loading */
    #loading {
      position: fixed;
      inset: 0;
      background: linear-gradient(135deg, #0a0d12 0%, #12161f 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      gap: 24px;
      z-index: 2000;
      transition: opacity .6s ease;
    }
    
    #loading.hidden {
      opacity: 0;
      pointer-events: none;
    }
    
    .spinner {
      width: 56px;
      height: 56px;
      border: 5px solid rgba(74,124,255,.15);
      border-top-color: #6a9cff;
      border-radius: 50%;
      animation: spin 1s cubic-bezier(0.68, -0.55, 0.265, 1.55) infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    .loading-text {
      color: #8ab4ff;
      font-size: 15px;
      font-weight: 500;
      letter-spacing: 0.5px;
    }
    
    /* Controls Grid */
    .controls-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 8px;
      font-size: 12px;
      margin-top: 8px;
    }
    
    .control-item {
      display: flex;
      align-items: center;
      gap: 6px;
      color: #b8c5d9;
    }
    
    /* Button Row */
    .button-row {
      display: flex;
      gap: 8px;
      margin-top: 12px;
    }
    
    .button-row button {
      flex: 1;
      font-size: 12px;
      padding: 8px 12px;
    }
    
    /* Active button state for interior panel */
    .button-row button.active {
      background: linear-gradient(135deg, #6ab4ff 0%, #4a9fff 100%);
      color: white;
      box-shadow: 0 0 10px rgba(74, 159, 255, 0.5);
      border: 1px solid #8ac9ff;
    }
    
    /* Ziya Dialogue Panel */
    .ziya-panel {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 320px;
      background: linear-gradient(135deg, #4a9fff 0%, #6ab4ff 100%);
      border: 3px solid #8ac9ff;
      border-radius: 16px;
      padding: 16px;
      box-shadow: 0 8px 24px rgba(74,159,255,0.4), 0 0 40px rgba(106,180,255,0.2);
      z-index: 250;
      font-family: 'Comic Sans MS', 'Chalkboard SE', 'Comic Neue', cursive, sans-serif;
      transition: all 0.3s ease;
      opacity: 0;
      pointer-events: none;
    }
    
    .ziya-panel.active {
      opacity: 1;
      animation: ziyaBounce 0.5s ease;
    }
    
    @keyframes ziyaBounce {
      0% { transform: translateY(20px) scale(0.8); opacity: 0; }
      60% { transform: translateY(-5px) scale(1.05); }
      100% { transform: translateY(0) scale(1); opacity: 1; }
    }
    
    .ziya-notification {
      font-size: 13px;
      font-weight: bold;
      color: white;
      background: linear-gradient(135deg, #2d5fa0 0%, #3d6fb0 100%);
      padding: 6px 12px;
      border-radius: 8px;
      text-align: center;
      margin-bottom: 8px;
      text-shadow: 0 2px 4px rgba(0,0,0,0.4);
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
      letter-spacing: 0.3px;
    }
    
    .ziya-header {
      font-size: 16px;
      font-weight: bold;
      color: white;
      text-shadow: 0 2px 4px rgba(0,0,0,0.3);
      margin-bottom: 12px;
      text-align: center;
      letter-spacing: 0.5px;
    }
    
    .ziya-message {
      background: rgba(255,255,255,0.95);
      color: #2a3a5a;
      padding: 14px 16px;
      border-radius: 12px;
      font-size: 15px;
      font-weight: 500;
      line-height: 1.4;
      min-height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
      border: 2px solid rgba(138,201,255,0.5);
    }
  </style>
  <!-- Optional systems removed (files not present in repo). -->
</head>
<body>
  <div id="loading">
    <div class="spinner"></div>
    <div class="loading-text">Initializing Pockit Ultra...</div>
  </div>
  
  <!-- Visual Settings Panel -->
  <div id="visual-panel" class="ui-panel">
    <div class="panel-title">Visual Settings</div>
    
    <div class="control-row">
      <span class="control-label">Shadows Quality</span>
      <div class="toggle-switch active" id="toggle-shadows"></div>
    </div>
    
    <div class="control-row">
      <span class="control-label">Volumetric Fog</span>
      <div class="toggle-switch active" id="toggle-fog"></div>
    </div>
    
     <div class="control-row">
       <span class="control-label">Post-Processing</span>
       <div class="toggle-switch" id="toggle-postfx"></div>
     </div>
     
     <div class="control-row">
       <span class="control-label">Anti-Aliasing</span>
       <div class="toggle-switch" id="toggle-aa"></div>
     </div>
     
    <div class="section-title">Post-FX Effects</div>
    
    <!-- Bloom -->
    <div class="control-row">
      <span class="control-label">Bloom</span>
      <div class="toggle-switch" id="toggle-bloom"></div>
    </div>
    <div class="control-row">
      <span class="control-label">  Strength</span>
      <span class="control-value" id="bloom-strength-value">0.30</span>
    </div>
    <input type="range" id="bloom-strength-slider" min="0" max="2" value="0.3" step="0.01">
    <div class="control-row">
      <span class="control-label">  Radius</span>
      <span class="control-value" id="bloom-radius-value">0.40</span>
    </div>
    <input type="range" id="bloom-radius-slider" min="0" max="1" value="0.4" step="0.01">
    <div class="control-row">
      <span class="control-label">  Threshold</span>
      <span class="control-value" id="bloom-threshold-value">0.50</span>
    </div>
    <input type="range" id="bloom-threshold-slider" min="0" max="1" value="0.5" step="0.01">
    
    <!-- SSAO -->
    <div class="control-row">
      <span class="control-label">SSAO</span>
      <div class="toggle-switch" id="toggle-ssao"></div>
    </div>
    <div class="control-row">
      <span class="control-label">  Intensity</span>
      <span class="control-value" id="ssao-intensity-value">0.50</span>
    </div>
    <input type="range" id="ssao-intensity-slider" min="0" max="2" value="0.5" step="0.01">
    <div class="control-row">
      <span class="control-label">  Radius</span>
      <span class="control-value" id="ssao-radius-value">7</span>
    </div>
    <input type="range" id="ssao-radius-slider" min="1" max="32" value="7" step="1">
    
    <!-- Depth of Field -->
    <div class="control-row">
      <span class="control-label">Depth of Field</span>
      <div class="toggle-switch" id="toggle-dof"></div>
    </div>
    <div class="control-row">
      <span class="control-label">  Focus Dist</span>
      <span class="control-value" id="dof-focus-value">10.0</span>
    </div>
    <input type="range" id="dof-focus-slider" min="0.1" max="100" value="10" step="0.1">
    <div class="control-row">
      <span class="control-label">  Aperture</span>
      <span class="control-value" id="dof-aperture-value">0.010</span>
    </div>
    <input type="range" id="dof-aperture-slider" min="0.0001" max="0.1" value="0.01" step="0.0001">
    <div class="control-row">
      <span class="control-label">  Max Blur</span>
      <span class="control-value" id="dof-maxblur-value">0.005</span>
    </div>
    <input type="range" id="dof-maxblur-slider" min="0" max="0.02" value="0.005" step="0.0001">
    
    <!-- Film Grain -->
    <div class="control-row">
      <span class="control-label">Film Grain</span>
      <div class="toggle-switch" id="toggle-film"></div>
    </div>
    <div class="control-row">
      <span class="control-label">  Intensity</span>
      <span class="control-value" id="film-intensity-value">0.15</span>
    </div>
    <input type="range" id="film-intensity-slider" min="0" max="1" value="0.15" step="0.01">
    
    <!-- Vignette -->
    <div class="control-row">
      <span class="control-label">Vignette</span>
      <div class="toggle-switch" id="toggle-vignette"></div>
    </div>
    <div class="control-row">
      <span class="control-label">  Intensity</span>
      <span class="control-value" id="vignette-intensity-value">0.50</span>
    </div>
    <input type="range" id="vignette-intensity-slider" min="0" max="1" value="0.5" step="0.01">
    <div class="control-row">
      <span class="control-label">  Softness</span>
      <span class="control-value" id="vignette-softness-value">0.50</span>
    </div>
    <input type="range" id="vignette-softness-slider" min="0" max="1" value="0.5" step="0.01">
    
    <!-- Chromatic Aberration -->
    <div class="control-row">
      <span class="control-label">Chromatic Aberr.</span>
      <div class="toggle-switch" id="toggle-chromatic"></div>
    </div>
    <div class="control-row">
      <span class="control-label">  Amount</span>
      <span class="control-value" id="chromatic-amount-value">0.002</span>
    </div>
    <input type="range" id="chromatic-amount-slider" min="0" max="0.01" value="0.002" step="0.0001">
    
    <!-- Motion Blur -->
     <div class="control-row">
       <span class="control-label">Motion Blur</span>
       <div class="toggle-switch" id="toggle-motionblur"></div>
     </div>
    
    <div class="section-title">Camera</div>
    
    <div class="control-row">
      <span class="control-label">FOV</span>
      <span class="control-value" id="fov-value">75¬∞</span>
    </div>
    <input type="range" id="fov-slider" min="50" max="120" value="75">
    
    <div class="control-row">
      <span class="control-label">Render Scale</span>
      <span class="control-value" id="render-scale-value">1.0x</span>
    </div>
    <input type="range" id="render-scale-slider" min="50" max="200" value="100" step="10">
  </div>
  
  <!-- Optimization Panel -->
  <div id="optimization-panel" class="ui-panel">
    <div class="panel-title">‚ö° Optimization</div>
    
    <div class="section-title">Instanced Details</div>
    
    <div class="control-row">
      <span class="control-label">ü™ü Windows</span>
      <div class="toggle-switch active" id="toggle-windows"></div>
    </div>
    <div class="control-row">
      <span class="control-label">Max Count</span>
      <span class="control-value" id="windows-count">5000</span>
    </div>
    <input type="range" id="windows-slider" min="0" max="10000" value="5000" step="500">
    
    <div class="control-row">
      <span class="control-label">üèõÔ∏è Window Sills</span>
      <div class="toggle-switch active" id="toggle-sills"></div>
    </div>
    <div class="control-row">
      <span class="control-label">Max Count</span>
      <span class="control-value" id="sills-count">10000</span>
    </div>
    <input type="range" id="sills-slider" min="0" max="20000" value="10000" step="1000">
    
    <div class="control-row">
      <span class="control-label">üö∂ Pedestrians</span>
      <div class="toggle-switch active" id="toggle-pedestrians"></div>
    </div>
    <div class="control-row">
      <span class="control-label">Max Count</span>
      <span class="control-value" id="pedestrians-count">500</span>
    </div>
    <input type="range" id="pedestrians-slider" min="0" max="1000" value="500" step="50">
    
    <div class="control-row">
      <span class="control-label">üå± Grass Blades</span>
      <div class="toggle-switch" id="toggle-grass"></div>
    </div>
    <div class="control-row">
      <span class="control-label">Max Count</span>
      <span class="control-value" id="grass-count">0</span>
    </div>
    <input type="range" id="grass-slider" min="0" max="50000" value="0" step="5000">
    
    <div class="section-title">Distant City</div>
    
    <div class="control-row">
      <span class="control-label">Skyline Density</span>
      <span class="control-value" id="skyline-density">5.0x</span>
    </div>
    <input type="range" id="skyline-slider" min="1" max="10" value="5" step="0.5">
    
    <div class="button-row">
      <button id="btn-apply-optimization">‚ú® Apply & Rebuild</button>
    </div>
    
    <div style="margin-top: 10px; font-size: 10px; color: #8a96a8; line-height: 1.4;">
      üí° Lower counts improve FPS. Changes require city rebuild to take effect.
    </div>
  </div>
  
  <!-- Viewport Panel -->
  <div id="viewport-panel" class="ui-panel">
    <div class="panel-title">Frame of Reference</div>
    
    <div class="control-row">
      <span class="control-label">Pluck Mode</span>
      <div class="toggle-switch" id="toggle-pluck"></div>
    </div>
    
    <div class="control-row">
      <span class="control-label">Distance</span>
      <span class="control-value" id="viewport-dist-value">0.9m</span>
    </div>
    <input type="range" id="viewport-dist-slider" min="20" max="500" value="90" step="5">
    
    <div class="section-title">Actions</div>
    
    <div class="button-row">
      <button id="btn-snapshot" class="secondary">üì∑ Snapshot</button>
      <button id="btn-clear" class="secondary">üóë Clear</button>
    </div>
    
    <div style="margin-top: 12px; font-size: 11px; color: #8a96a8; line-height: 1.5;">
      <strong>Pluck Mode:</strong><br>
      ‚Ä¢ Hover to highlight objects<br>
      ‚Ä¢ Click to grab & drag<br>
      ‚Ä¢ Scroll to adjust depth<br>
      ‚Ä¢ Objects rescale to frame<br>
      <br>
      <strong>Lock Mode:</strong><br>
      ‚Ä¢ Click to lock all in frame<br>
      ‚Ä¢ Right Click: Snapshot view<br>
      ‚Ä¢ Scroll: Frame distance
    </div>
  </div>
  
  <!-- Ziya Dialogue Panel (Player Character) -->
  <div id="ziya-dialogue" class="ziya-panel">
    <div class="ziya-notification">üîî New Comment!</div>
    <div class="ziya-header">üíô Ziya Says</div>
    <div class="ziya-message" id="ziya-message"></div>
  </div>
  
  <!-- Controls Panel -->
  <div id="controls-panel" class="ui-panel">
    <div class="panel-title">Controls</div>
    
    <div class="controls-grid">
      <div class="control-item"><kbd>W</kbd><kbd>A</kbd><kbd>S</kbd><kbd>D</kbd> Move</div>
      <div class="control-item"><kbd>Space</kbd> Jump</div>
      <div class="control-item"><kbd>Shift</kbd> Sprint</div>
      <div class="control-item"><kbd>Q</kbd> / <kbd>E</kbd> Scale</div>
      <div class="control-item"><kbd>R</kbd> Reset</div>
      <div class="control-item"><kbd>V</kbd> Viewport</div>
      <div class="control-item"><kbd>P</kbd> Portals</div>
      <div class="control-item"><kbd>M</kbd> Map</div>
      <div class="control-item"><kbd>H</kbd> Hide UI</div>
      <div class="control-item"><kbd>I</kbd> Interior</div>
    </div>
    
    <div class="section-title">World</div>
    
    <div class="button-row">
      <button id="spawn-city">üèô New City</button>
      <button id="spawn-objects" class="secondary">üì¶ Objects</button>
    </div>
  </div>
  
  <!-- Interior Generation Panel -->
  <div id="interior-panel" class="ui-panel" style="display: none;">
    <div class="panel-title">üè¢ Interior Generator</div>
    
    <div class="section-title">Residential</div>
    
    <div class="button-row">
      <button id="btn-apt-studio" class="secondary" style="flex: 1; font-size: 11px;">Studio</button>
      <button id="btn-apt-1br" class="secondary" style="flex: 1; font-size: 11px;">1BR</button>
      <button id="btn-apt-2br" class="secondary" style="flex: 1; font-size: 11px;">2BR</button>
      <button id="btn-apt-3br" class="secondary" style="flex: 1; font-size: 11px;">3BR</button>
    </div>
    
    <div class="button-row">
      <button id="btn-gen-apartment">üè† Generate Apartment</button>
    </div>
    
    <div class="section-title">Commercial & Public</div>
    
    <div class="button-row">
      <button id="btn-gen-office">üè¢ Generate Office</button>
    </div>
    
    <div class="button-row">
      <button id="btn-gen-classroom">üìö Generate Classroom</button>
    </div>
    
    <div class="button-row">
      <button id="btn-gen-gymnasium">üèÄ Generate Gymnasium</button>
    </div>
    
    <div class="section-title">Institutional</div>
    
    <div class="button-row">
      <button id="btn-gen-cellblock">üîí Generate Cell Block</button>
    </div>
    
    <div class="section-title">Actions</div>
    
    <div class="button-row">
      <button id="btn-clear-interior" class="secondary">üóë Clear</button>
      <button id="btn-randomize-interior" class="secondary">üé≤ Random</button>
    </div>
    
    <div style="margin-top: 10px; font-size: 10px; color: #8a96a8; line-height: 1.4;">
      üí° Select apartment size before generating. Each room type has unique furniture layouts.
    </div>
  </div>
  
  <!-- Stats Panel -->
  <div id="stats-panel" class="ui-panel">
    <div class="panel-title">Status</div>
    
    <div class="control-row">
      <span class="control-label">Player Scale</span>
      <span class="control-value" id="stat-scale">1.00x</span>
    </div>
    
    <div class="control-row">
      <span class="control-label">World Scale</span>
      <span class="control-value" id="stat-world-scale">1.00x</span>
    </div>
    
    <div class="control-row">
      <span class="control-label">Position</span>
      <span class="control-value" id="stat-position">0, 0, 0</span>
    </div>
    
    <div class="control-row">
      <span class="control-label">Velocity</span>
      <span class="control-value" id="stat-velocity">0.0 m/s</span>
    </div>
    
    <div class="control-row">
      <span class="control-label">FPS</span>
      <span class="control-value" id="stat-fps">60</span>
    </div>
    
    <div class="control-row">
      <span class="control-label">Buildings</span>
      <span class="control-value" id="stat-buildings">0</span>
    </div>
    
    <div class="control-row">
      <span class="control-label">Objects</span>
      <span class="control-value" id="stat-objects">0</span>
    </div>
  </div>
  
  <div id="viewport-frame"></div>
  <div id="reticle"></div>
  <div id="tooltip"></div>
  <div id="info-panel">
    <div class="info-title" id="info-title">Information</div>
    <div id="info-content"></div>
  </div>
  <div id="hud-mini"><canvas id="hud-mini-canvas" width="520" height="292"></canvas></div>
  
  <!-- 2D Map Overlay -->
  <div id="map-overlay" style="display: none;">
    <div id="map-container">
      <div id="map-header">
        <h2>City Map</h2>
        <button id="map-close">√ó</button>
      </div>
      <canvas id="map-canvas"></canvas>
      <div id="map-info">
        <div id="map-hover-info"></div>
        <div id="map-stats">
          <span id="map-chunks-loaded">Chunks: 0</span>
          <span id="map-buildings-discovered">Buildings: 0/0</span>
        </div>
      </div>
    </div>
  </div>
  
  <script type="importmap">
  {
    "imports": {
      "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
      "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
    }
  }
  </script>
  
  <link rel="modulepreload" href="./js/engine/init.js">
  <link rel="modulepreload" href="./js/engine/postprocessing.js">
  <link rel="modulepreload" href="./js/map/overlay.js">
  <link rel="modulepreload" href="./js/engine/rocket-assets.js">
  <link rel="modulepreload" href="./js/interiors/loader.js">
  
  <script type="module" src="./js/engine/bootstrap.js"></script>

</body>
</html>
